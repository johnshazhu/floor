
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Floor - The typesafe, reactive, and lightweight SQLite abstraction for your Flutter applications">
      
      
      
      
        <link rel="canonical" href="https://vitusortner.github.io/floor/daos/">
      
      <link rel="shortcut icon" href="../img/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.3">
    
    
      
        <title>Data Access Objects - Floor SQLite</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3b61ea93.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700%7CJetbrains+Mono&display=fallback">
        <style>body,input{font-family:"Source Sans Pro",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Jetbrains Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-access-objects" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://vitusortner.github.io/floor/" title="Floor SQLite" class="md-header-nav__button md-logo" aria-label="Floor SQLite">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.25 12a.75.75 0 01-.22.53l-2.75 2.75a.75.75 0 01-1.06-1.06L7.44 12 5.22 9.78a.75.75 0 111.06-1.06l2.75 2.75c.141.14.22.331.22.53zm2 2a.75.75 0 000 1.5h5a.75.75 0 000-1.5h-5z"/><path fill-rule="evenodd" d="M0 4.75C0 3.784.784 3 1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14.5A1.75 1.75 0 0122.25 21H1.75A1.75 1.75 0 010 19.25V4.75zm1.75-.25a.25.25 0 00-.25.25v14.5c0 .138.112.25.25.25h20.5a.25.25 0 00.25-.25V4.75a.25.25 0 00-.25-.25H1.75z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            Floor SQLite
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              Data Access Objects
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/vitusortner/floor/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    floor
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        Home
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../getting-started/" class="md-tabs__link md-tabs__link--active">
        Documentation
      </a>
    </li>
  

      
        
  
  


  <li class="md-tabs__item">
    <a href="../changelog/" class="md-tabs__link">
      Changelog
    </a>
  </li>

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://vitusortner.github.io/floor/" title="Floor SQLite" class="md-nav__button md-logo" aria-label="Floor SQLite">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.25 12a.75.75 0 01-.22.53l-2.75 2.75a.75.75 0 01-1.06-1.06L7.44 12 5.22 9.78a.75.75 0 111.06-1.06l2.75 2.75c.141.14.22.331.22.53zm2 2a.75.75 0 000 1.5h5a.75.75 0 000-1.5h-5z"/><path fill-rule="evenodd" d="M0 4.75C0 3.784.784 3 1.75 3h20.5c.966 0 1.75.784 1.75 1.75v14.5A1.75 1.75 0 0122.25 21H1.75A1.75 1.75 0 010 19.25V4.75zm1.75-.25a.25.25 0 00-.25.25v14.5c0 .138.112.25.25.25h20.5a.25.25 0 00.25-.25V4.75a.25.25 0 00-.25-.25H1.75z"/></svg>

    </a>
    Floor SQLite
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/vitusortner/floor/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    floor
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1" >
    
    <label class="md-nav__link" for="nav-1">
      Home
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Home" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        <span class="md-nav__icon md-icon"></span>
        Home
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href=".." class="md-nav__link">
      Welcome
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../naming/" class="md-nav__link">
      Naming
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../feedback/" class="md-nav__link">
      Feedback
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  


  
  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" checked>
    
    <label class="md-nav__link" for="nav-2">
      Documentation
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Documentation" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="../getting-started/" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../architecture/" class="md-nav__link">
      Architecture
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../entities/" class="md-nav__link">
      Entities
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../database-views/" class="md-nav__link">
      Database Views
    </a>
  </li>

        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Data Access Objects
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Data Access Objects
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#queries" class="md-nav__link">
    Queries
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-changes" class="md-nav__link">
    Data Changes
  </a>
  
    <nav class="md-nav" aria-label="Data Changes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#insert" class="md-nav__link">
    Insert
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update" class="md-nav__link">
    Update
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#delete" class="md-nav__link">
    Delete
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#streams" class="md-nav__link">
    Streams
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#transactions" class="md-nav__link">
    Transactions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inheritance" class="md-nav__link">
    Inheritance
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../type-converters/" class="md-nav__link">
      Type Converters
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../migrations/" class="md-nav__link">
      Migrations
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../in-memory-database/" class="md-nav__link">
      In Memory Database
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../initialization-callback/" class="md-nav__link">
      Initialization Callback
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../platform-support/" class="md-nav__link">
      Platform Support
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../isolates/" class="md-nav__link">
      Isolates
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../testing/" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="../examples/" class="md-nav__link">
      Examples
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="../changelog/" class="md-nav__link">
      Changelog
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/vitusortner/floor/edit/develop/docs/daos.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                <h1 id="data-access-objects">Data Access Objects<a class="headerlink" href="#data-access-objects" title="Permanent link">&para;</a></h1>
<p>These components are responsible for managing access to the underlying SQLite database and are defined as abstract classes with method signatures and query statements.
DAO classes can use inherited methods by implementing and extending classes while also using mixins.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@dao</span>
<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PersonDao</span> <span class="p">{</span>
  <span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Person&#39;</span><span class="p">)</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span> <span class="n">findAllPersons</span><span class="p">();</span>

  <span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Person WHERE id = :id&#39;</span><span class="p">)</span>
  <span class="n">Stream</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">findPersonById</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>

  <span class="nd">@insert</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">insertPerson</span><span class="p">(</span><span class="n">Person</span> <span class="n">person</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="queries">Queries<a class="headerlink" href="#queries" title="Permanent link">&para;</a></h2>
<p>Method signatures turn into query methods by adding the <code>@Query()</code> annotation with the query in parenthesis to them.
Be patient about the correctness of your SQL statements.
They are only partly validated while generating the code.
These queries have to return either a <code>Future</code> or a <code>Stream</code> of an entity or <code>void</code>.
Returning <code>Future&lt;void&gt;</code> comes in handy whenever you want to delete the full content of a table, for instance.
Some query method examples can be seen in the following.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Person WHERE id = :id&#39;</span><span class="p">)</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">findPersonById</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>

<span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Person WHERE id = :id AND name = :name&#39;</span><span class="p">)</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">findPersonByIdAndName</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">,</span> <span class="kt">String</span> <span class="n">name</span><span class="p">);</span>

<span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Person&#39;</span><span class="p">)</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span> <span class="n">findAllPersons</span><span class="p">();</span> <span class="c1">// select multiple items</span>

<span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Person&#39;</span><span class="p">)</span>
<span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span> <span class="n">findAllPersonsAsStream</span><span class="p">();</span> <span class="c1">// stream return</span>

<span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;DELETE FROM Person&#39;</span><span class="p">)</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">deleteAllPersons</span><span class="p">();</span> <span class="c1">// query without returning an entity</span>

<span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Person WHERE id IN (:ids)&#39;</span><span class="p">)</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span> <span class="n">findPersonsWithIds</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">ids</span><span class="p">);</span> <span class="c1">// query with IN clause</span>
</code></pre></div>
<p>Query arguments, when using SQLite's <code>LIKE</code> operator, have to be supplied by the input of a method.
It's not possible to define a pattern matching argument like <code>%foo%</code> in the query itself.</p>
<div class="highlight"><pre><span></span><code><span class="c1">// dao</span>
<span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Person WHERE name LIKE :name&#39;</span><span class="p">)</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span> <span class="n">findPersonsWithNamesLike</span><span class="p">(</span><span class="kt">String</span> <span class="n">name</span><span class="p">);</span>

<span class="c1">// usage</span>
<span class="kd">final</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;%foo%&#39;</span><span class="p">;</span>
<span class="kd">await</span> <span class="n">dao</span><span class="p">.</span><span class="n">findPersonsWithNamesLike</span><span class="p">(</span><span class="n">name</span><span class="p">);</span>
</code></pre></div>
<h2 id="data-changes">Data Changes<a class="headerlink" href="#data-changes" title="Permanent link">&para;</a></h2>
<p>Use the <code>@insert</code>, <code>@update</code> and <code>@delete</code> annotations for inserting and changing persistent data.
All these methods accept single or multiple entity instances.</p>
<h3 id="insert">Insert<a class="headerlink" href="#insert" title="Permanent link">&para;</a></h3>
<p><code>@insert</code> marks a method as an insertion method.
When using the capitalized <code>@Insert</code> you can specify a conflict strategy.
Else it just defaults to aborting the insert.
These methods can return a <code>Future</code> of either <code>void</code>, <code>int</code> or <code>List&lt;int&gt;</code>.
- <code>void</code> return nothing
- <code>int</code> return primary key of inserted item
- <code>List&lt;int&gt;</code> return primary keys of inserted items</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Insert</span><span class="p">(</span><span class="nl">onConflict:</span> <span class="n">OnConflictStrategy</span><span class="p">.</span><span class="n">rollback</span><span class="p">)</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">insertPerson</span><span class="p">(</span><span class="n">Person</span> <span class="n">person</span><span class="p">);</span>

<span class="nd">@insert</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span> <span class="n">insertPersons</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">persons</span><span class="p">);</span>
</code></pre></div>
<h3 id="update">Update<a class="headerlink" href="#update" title="Permanent link">&para;</a></h3>
<p><code>@update</code> marks a method as an update method.
When using the capitalized <code>@Update</code> you can specify a conflict strategy.
Else it just defaults to aborting the update.
These methods can return a <code>Future</code> of either <code>void</code> or <code>int</code>.
- <code>void</code> return nothing
- <code>int</code> return number of changed rows</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Update</span><span class="p">(</span><span class="nl">onConflict:</span> <span class="n">OnConflictStrategy</span><span class="p">.</span><span class="n">replace</span><span class="p">)</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">updatePerson</span><span class="p">(</span><span class="n">Person</span> <span class="n">person</span><span class="p">);</span>

<span class="nd">@update</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">updatePersons</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">persons</span><span class="p">);</span>
</code></pre></div>
<h3 id="delete">Delete<a class="headerlink" href="#delete" title="Permanent link">&para;</a></h3>
<p><code>@delete</code> marks a method as a deletion method.
These methods can return a <code>Future</code> of either <code>void</code> or <code>int</code>.
- <code>void</code> return nothing
- <code>int</code> return number of deleted rows</p>
<div class="highlight"><pre><span></span><code><span class="nd">@delete</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">deletePerson</span><span class="p">(</span><span class="n">Person</span> <span class="n">person</span><span class="p">);</span>

<span class="nd">@delete</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">deletePersons</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">persons</span><span class="p">);</span>
</code></pre></div>
<h2 id="streams">Streams<a class="headerlink" href="#streams" title="Permanent link">&para;</a></h2>
<p>As already mentioned, queries cannot only return values once when called but also continuous streams of query results.
The returned streams keep you in sync with the changes happening in the database tables.
This feature plays well with the <code>StreamBuilder</code> widget which accepts a stream of values and rebuilds itself whenever there is a new emission.</p>
<p>These methods return broadcast streams and thus, can have multiple listeners.
<div class="highlight"><pre><span></span><code><span class="c1">// definition</span>
<span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Person&#39;</span><span class="p">)</span>
<span class="n">Stream</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span> <span class="n">findAllPersonsAsStream</span><span class="p">();</span>

<span class="c1">// usage</span>
<span class="n">StreamBuilder</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span><span class="p">(</span>
  <span class="nl">stream:</span> <span class="n">dao</span><span class="p">.</span><span class="n">findAllPersonsAsStream</span><span class="p">(),</span>
  <span class="nl">builder:</span> <span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">,</span> <span class="n">AsyncSnapshot</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;&gt;</span> <span class="n">snapshot</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something with the values here</span>
  <span class="p">},</span>
<span class="p">);</span>
</code></pre></div></p>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<ul>
<li>Only methods annotated with <code>@insert</code>, <code>@update</code> and <code>@delete</code> trigger <code>Stream</code> emissions.
  Inserting data by using the <code>@Query()</code> annotation doesn't.</li>
<li>It is now possible to return a <code>Stream</code> if the function queries a database view. But it will fire on <strong>any</strong>
  <code>@update</code>, <code>@insert</code>, <code>@delete</code> events in the whole database, which can get quite taxing on the runtime. Please add it only if you know what you are doing!
  This is mostly due to the complexity of detecting which entities are involved in a database view.</li>
<li>Functions returning a stream of single items such as <code>Stream&lt;Person&gt;</code> do not emit when there is no query result.</li>
</ul>
</div>
<h2 id="transactions">Transactions<a class="headerlink" href="#transactions" title="Permanent link">&para;</a></h2>
<p>Whenever you want to perform some operations in a transaction you have to add the <code>@transaction</code> annotation to the method.
It's also required to add the <code>async</code> modifier. These methods have to return a <code>Future</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@transaction</span>
<span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">replacePersons</span><span class="p">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">persons</span><span class="p">)</span> <span class="kd">async</span> <span class="p">{</span>
  <span class="kd">await</span> <span class="n">deleteAllPersons</span><span class="p">();</span>
  <span class="kd">await</span> <span class="n">insertPersons</span><span class="p">(</span><span class="n">persons</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="inheritance">Inheritance<a class="headerlink" href="#inheritance" title="Permanent link">&para;</a></h2>
<p>Data access object classes support inheritance as shown in the following.
There is no limit to inheritance levels and thus, each abstract parent can have another abstract parent.
Bear in mind that only abstract classes allow method signatures without an implementation body and thereby, make sure to position your to-be-inherited methods in an abstract class and extend this class with your DAO.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@dao</span>
<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">PersonDao</span> <span class="kd">extends</span> <span class="n">AbstractDao</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="nd">@Query</span><span class="p">(</span><span class="s1">&#39;SELECT * FROM Person WHERE id = :id&#39;</span><span class="p">)</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">findPersonById</span><span class="p">(</span><span class="kt">int</span> <span class="n">id</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">AbstractDao</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span> <span class="p">{</span>
  <span class="nd">@insert</span>
  <span class="n">Future</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span> <span class="n">insertItem</span><span class="p">(</span><span class="n">T</span> <span class="n">item</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// usage</span>
<span class="kd">final</span> <span class="n">person</span> <span class="o">=</span> <span class="n">Person</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="s1">&#39;Simon&#39;</span><span class="p">);</span>
<span class="kd">await</span> <span class="n">personDao</span><span class="p">.</span><span class="n">insertItem</span><span class="p">(</span><span class="n">person</span><span class="p">);</span>

<span class="kd">final</span> <span class="n">result</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">personDao</span><span class="p">.</span><span class="n">findPersonById</span><span class="p">(</span><span class="m">1</span><span class="p">);</span>
</code></pre></div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../database-views/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Database Views
              </div>
            </div>
          </a>
        
        
          <a href="../type-converters/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Type Converters
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/vendor.08c56446.min.js"></script>
      <script src="../assets/javascripts/bundle.6ced434e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: ['toc.integrate', 'navigation.tabs'],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>